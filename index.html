<!DOCTYPE html>
<html lang="fr">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Coffee Quest AR - SAE 402</title>
  <link rel="stylesheet" href="/src/style.css">
</head>

<body>
  <div id="overlay">
    <h2>â˜• Coffee Quest AR</h2>
    <p id="debug">Chargement...</p>
    <p id="surfaces">Surfaces: 0</p>
    <button id="btn">Lancer AR</button>
  </div>

  <!-- Popup des rÃ¨gles -->
  <div id="rules-popup">
    <h2>â˜• Bienvenue Barista !</h2>
    <p>
      Votre mission : prÃ©parer et servir des cafÃ©s !
    </p>
    <p>
      ğŸ“ <strong>Pour commencer :</strong><br>
      Placez la machine Ã  cafÃ© et les tasses sur une table ou surface plane.
    </p>
    <p>
      âœ‹ Utilisez votre main pour attraper et dÃ©placer les objets.
    </p>
    <button id="rules-ok-btn">OK, C'est parti !</button>
  </div>

  <!-- Popup d'annonce des clients -->
  <div id="clients-popup">
    <h2>ğŸ‰ CafÃ© en place !</h2>
    <p>
      Parfait ! Votre espace de travail est prÃªt.
    </p>
    <p>
      â˜• Les premiers clients vont arriver...
    </p>
    <button id="clients-ok-btn">PrÃªt Ã  servir !</button>
  </div>

  <a-scene id="scene" physics="debug:false;gravity:-9.8" vr-mode-ui="enabled:false" renderer="alpha:true;antialias:true"
    background="color:transparent">

    <a-assets>
      <a-asset-item id="coffee-cup-model" src="/models/Coffee cup.glb"></a-asset-item>
      <a-asset-item id="coffee-machine-model" src="/models/Coffee Machine.glb"></a-asset-item>
      <audio id="coffee-sound" src="/assets/cafÃ©.MP3" preload="auto"></audio>
      <audio id="cup-sound" src="/assets/tasse.mp3" preload="auto"></audio>
    </a-assets>

    <a-light type="ambient" intensity="0.6"></a-light>
    <a-light type="directional" position="1 2 1" intensity="0.8"></a-light>

    <a-entity id="rig">
      <a-camera id="cam" position="0 1.6 0"></a-camera>
    </a-entity>

    <!-- CUBE original du camarade -->
    <a-box id="cube" position="0 0.5 -0.7" width="0.15" height="0.15" depth="0.15" color="#8A2BE2"
      dynamic-body="mass:0.5;linearDamping:0.3;angularDamping:0.3"></a-box>

    <!-- Comptoir (surface statique) -->
    <a-box 
      position="0 0.5 -1" 
      width="3" 
      height="0.1" 
      depth="1.2" 
      color="#8B4513"
      static-body></a-box> 
    
    <!-- Machine Ã  cafÃ© (attrapable) -->
    <a-entity 
      id="cube"
      data-machine="true"
      gltf-model="#coffee-machine-model" 
      position="-0.5 0.95 -1" 
      rotation="0 180 0" 
      scale="0.6 0.6 0.6"
      dynamic-body="mass:0.8;linearDamping:0.3;angularDamping:0.3"></a-entity>
    
    <!-- Tasse de cafÃ© (attrapable) -->
    <a-entity 
      id="cube"
      gltf-model="#coffee-cup-model" 
      position="0.2 0.85 -0.9" 
      rotation="0 180 0" 
      scale="0.5 0.5 0.5"
      dynamic-body="mass:0.3;linearDamping:0.3;angularDamping:0.3"></a-entity>

    <!-- Curseur hit-test -->
    <a-ring id="cursor" position="0 0 -1" rotation="-90 0 0" radius-inner="0.05" radius-outer="0.08" color="#00FF00"
      visible="false"></a-ring>

    <!-- Sol de base -->
    <a-plane position="0 0 0" rotation="-90 0 0" width="20" height="20" visible="false" static-body></a-plane>

  </a-scene>

  <script type="module" src="/src/main.js"></script>
</body>

</html>
